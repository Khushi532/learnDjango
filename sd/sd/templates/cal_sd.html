<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculate Standard Deviation</title>
</head>
<body>
    <h1>Calculate Standard Deviation</h1>

    <form action="calculate" method="post">
        {% csrf_token %}
        <label for="values">Values (comma-separated):</label>
        <input type="text" id="values" name="values" required><br><br>

        <label for="sub_group_size">Subgroup Size:</label>
        <input type="number" id="sub_group_size" name="sub_group_size" value="1" max="15" required><br><br>

        <label for="upper_limit">Upper Limit:</label>
        <input type="number" id="upper_limit" name="upper_limit"><br><br>

        <label for="lower_limit">Lower Limit:</label>
        <input type="number" id="lower_limit" name="lower_limit"><br><br>

        <button type="submit">Compute</button>
    </form>

    <div>

        {% comment %} {% for message in messages %}
        <div>
        <h3>SD: {{ message }}</h3>
        </div>
        {% endfor %} {% endcomment %}

        <table border="1">
            <thead>
                <tr>
                    <th>Values</th>
                    <th>Subgroup Size</th>
                    <th>Upper Limit</th>
                    <th>Lower Limit</th>
                    <th>SD</th>
                    <th>CP</th>
                    <th>CPK</th>
                    <th>PP</th>
                    <th>PPK</th>
                    <th>PPM</th>
                </tr>
            </thead>
            <tbody>
                {% for item in data|slice:"1:" %}
                    <tr>
                        <td>{{ item.values }}</td>
                        <td>{{ item.sub_group_size }}</td>
                        <td>{{ item.upper_limit|default:"N/A" }}</td>
                        <td>{{ item.lower_limit|default:"N/A" }}</td>
                        <td>{{ item.sd|default:"N/A"|floatformat:3}}</td>
                        <td>{{ item.cp|default:"N/A"|floatformat:3 }}</td>
                        <td>{{ item.cpk|default:"N/A"|floatformat:3 }}</td>
                        <td>{{ item.pp|default:"N/A"|floatformat:3 }}</td>
                        <td>{{ item.ppk|default:"N/A"|floatformat:3 }}</td>
                        <td>{{ item.ppm|default:"N/A"}}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    
    </div>

    <div id="result"></div>

</body>
</html>
